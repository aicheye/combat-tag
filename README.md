[![Modrinth](https://img.shields.io/badge/dynamic/json?labelColor=black&color=grey&label=&suffix=%20downloads&query=downloads&url=https://api.modrinth.com/v2/project/BGmYkhnA&style=flat&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAJPUExURQAAABvZahWnUha1WAYzGQlHIxvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZahvZav///9ScwmYAAADDdFJOUwAAAAAAAA8zW3uOYwIBK3rB6Pn+ml18KiGL5HEDquOIH07R/UzKz2zu+uLHIibtafWkVCMNBRqg7/RQuT8EQbvT+5ETDBSU/NAgCSdZlcQKii7mtxJY5fF/7D1SRkB+EcWh4UilOOtPMdTCR1PqN969vmGDCw7G4DSSsAcGHrSPr3bds5CEwDKoXumcZdwcG4KmjayX32A79pjOqRjIFoXynVYVgPi6qxDnL78p2obVJFquNbGZCPdyvHPZ1yhuh8s+iRzcsrEAAAABYktHRMQUDBvhAAAAB3RJTUUH5wQXDwgZWDUtiQAAAqRJREFUOMttU/k7lFEU/k4L4hsxtNAnhRgiJZOiSfbI2oJpmRFCi2kV0aaNVLTIEpVISmnf97r/WO+534yZnqfzw73vOe+559xz7rmKIoVYvLx95vj6qUSqVBW3sGrwnxsQaAwSwcDz5i9g0wxPfmFIqJCyiEgLE4vDl7iD8PGlETotIqOQahlAdJTLA5sWY5JsbNzysHiihEBWViRqRDOlgyFmJVtMq5JWJ5vhvyZlLevrEmUILKl8PihtvYWcYt6QLmNwFjjEb4SSkZnlZLO5yJzcPBg35bODwZfPZxYwWbC5sKjYzwBUkssxSg1wKNsCtHUb89vTy3GwopBxDmcJ9YdDJYB1B9t2WmUtcbtkqt18Mxsp9irsezS2VEu+uka/mqUWSrFd2VsnhLEetoZ9TFv3HwCexdUdjBWi0aH4YTuEvtoPM3/EO1nnuTpEjD2qHIM54DhR0wmA5hZySzIntyknsbZyi8IB0tp07tRpBDKfgeWsdDjHDlFGRIjnl3O0t573gcMFUBeVS1gvlxB1dOZxv0pIu9IF01UDZRdjr1SuZQhxvbvnRrmsMePmrdsrGPRaKP8OLtmn9KM7A4N3xb8yNExUb5RlZt2btpZbXajzPoYkBaDKrtADp3HkYdloo56ndgx37UcHxSP0tIWBGH9cg1nx6TJFTNhS7eCfcA1PJ+GgDbLDs2GuX3V05Ohj0xYSBGumyq/yfApw4EWTRxPJqxQvIF6+ks9Gr0d4nN+8Nbhoi+NdJEwVSc6hVNvHOUvg+5qeDxoP3GQz6x8/qXLuZ6Op7SPy+gNTnydSELabk1Z8Mbs/hlr4dbobfUgxJMS3UdXza9H33jqnA3/OH41FCZ7/l7HW8vOXiWc9GvPf06D953/T2O/EP8HBNtcH0Zm/lqFNUgTAex4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDQtMjNUMTU6MDg6MjQrMDA6MDAE5dOaAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA0LTIzVDE1OjA4OjI0KzAwOjAwdbhrJgAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0wNC0yM1QxNTowODoyNSswMDowMITaQU0AAAAASUVORK5CYII=)]([project_link](https://modrinth.com/project/BGmYkhnA))\
[![Modrinth](https://img.shields.io/badge/Available_for-1.21.4~1.21.8-4bab62)]([project_link](https://modrinth.com/project/BGmYkhnA))

### **A lightweight fabric server mod to make PvP fairer and prevent combat-logging.**
_Ethically sourced and GMO-free!_ Consider downloading on [Modrinth](https://modrinth.com/project/BGmYkhnA) to support this project.

![image](https://github.com/user-attachments/assets/30e4fe6e-58d0-4fb9-89a9-b41005c27fb0)

## Features:
- Compatible with PvP and PvE
- Combat disconnect punishing
  - Reduced health to half a heart (can be configured to instantly kill)
  - Reduced absorption
  - Poison
- While combat tagged
  - TP cooldown (ender pearls and chorus fruit)
    - By default, the cooldown starts as soon as the player enters combat
  - Enchanted golden apple cooldown
    - By default, the cooldown only starts after eating the first enchanted golden apple
  - Elytras disabled while combat tagged
  - Red username
  - Bar to indicate how long until the player's combat tag expires
- **Fully configurable**

### Note:
An unexpected server shutdown **will** count as a disconnect (stopping the server gracefully will not).

By default, /teammsg and /team are disabled
- All players in combat are put on a "combat" team for the sake of username colouring
- Disabling username colouring also re-enables these commands

## Configuration Options
Found in `./config/CombatTag.json`

|Key|Type|Default|Description|
|---|---|---|---|
|CombatDurationSec|Float|20.0|How long the combat tag should last for|
|CombatTpCooldownSec|Float|10.0|How long the cooldown for enderpearls and chorus fruits should be during combat|
|CombatNotchAppleCooldownSec|Float|10.0|How long the cooldown for enchanted golden apples should be during combat|
|HealthRemainingPunish|Float|1.0|How much health the player should have upon reconneccting while combat tagged|
|AbsorptionRemainingPunish|Float|0.0|How much absorption the player should have upon reconnecting while combat tagged|
|PoisonDurationSec|Float|20.0|How long the player should be poisoned for upon reconnecting while combat tagged|
|PoisonLevel|Integer|5|The amplification level of the poison effect upon reconnecting while combat tagged|
|EnableTagOnAttack|Boolean|true|Whether the attacker should be tagged in PvP|
|EnablePveTagOnDamage|Boolean|false|Whether the damaged player should be tagged in PvE|
|EnablePveTagOnAttack|Boolean|false|Whether the attacking player should be tagged in PvE|
|EnableHealthPunish|Boolean|true|Whether the player should lose health upon reconnecting while combat tagged|
|EnableAbsorptionPunish|Boolean|true|Whether the player should lose absorption upon reconnecting while combat tagged|
|EnablePoisonPunish|Boolean|true|Whether the player should be poisoned upon reconnecting while combat tagged|
|EnableTpPunish|Boolean|true|Whether the teleport cooldown should be active during combat|
|EnableInstantTpPunish|Boolean|true|Whether the teleport cooldown should be activated immediately upon entering combat|
|EnableNotchApplePunish|Boolean|true|Whether the enchanted golden apple cooldown should be active during combat|
|EnableInstantNotchApplePunish|Boolean|false|Whether the enchanted golden apple cooldown should be activated immediately upon entering combat|
|EnableElytraPunish|Boolean|true|Whether elytra should be disabled during combat|
|EnableCombatColour|Boolean|true|Whether players in combat should appear red (spectral arrows, scoreboard, username in chat, etc.)|
|DisableTeamMsgCommand*|Boolean|true|Whether players should be allowed to use /teammsg|
|DisableTeamCommand*|Boolean|true|Whether players should be allowed to use /team|

*Warning: disabling these options may allow players in combat to message each other or leave the combat team and lose their colour

## Requirements
- Fabric loader 16.10 or later (1.21.4/5)
- Fabric loader 16.14 or later (1.21.6/7)
- Minecraft 1.21.4 or later
  - May work with older versions (build yourself to test: see [here](https://fabricmc.net/develop/) for more)
- Java 21 or later
